<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Auto refresh every 10 seconds -->
    <meta http-equiv="refresh" content="10" >

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Iconic -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.css" rel="stylesheet">

    <!-- CSS -->
    <link href="{{ url_for('static', filename='index.css')}}" rel="stylesheet">

    <title>People Vs. Noise</title>
</head>
<body id="page-top">
  <nav class="navbar navbar-dark bg-dark static-top">

    <a class="navbar-brand mr-1" href="index.html">People vs Sound</a>

    
    

  </nav>

  <div id="content-wrapper">

      <div class="container-fluid">

        <br>

        <!-- Icon Cards-->
        <div class="row">
          <div class="col-xl-6 col-sm-6 mb-6">
            <div class="card text-white bg-primary o-hidden h-100">
              <div class="card-body">
                <div class="card-body-icon">
                  <i class="fas fa-fw fa-comments"></i>
                </div>
                <div class="mr-5">Number of people</div>
              </div>
              <a class="card-footer text-white clearfix small z-1" href="#">
                <span class="float-left"><span class="oi oi-people"></span>  {{people.number}}</span>
                <span class="float-right">
                  <i class="fas fa-angle-right"></i>
                </span>
              </a>
            </div>
          </div>
            {% set last_entry = decibels|last %}
            {% if last_entry.db <= 40 %}
          
              <div class="col-xl-6 col-sm-6 mb-6">
            <div class="card text-white bg-success o-hidden h-100">
              <div class="card-body">
                <div class="card-body-icon">
                  <i class="fas fa-fw fa-shopping-cart"></i>
                </div>
                <div class="mr-5">Noise Level</div>
              </div>
              <a class="card-footer text-white clearfix small z-1" href="#">
                <span class="float-left"> <span class="oi oi-volume-off"></span> Quiet {{ last_entry.db }} dB  </span>
                <span class="float-right">
                  <i class="fas fa-angle-right"></i>
                </span>
              </a>
            </div>
          </div>

            {% elif last_entry.db <= 60 %}
            

        


          <div class="col-xl-6 col-sm-6 mb-6">
            <div class="card text-white bg-warning o-hidden h-100">
              <div class="card-body">
                <div class="card-body-icon">
                  <i class="fas fa-fw fa-list"></i>
                </div>
                <div class="mr-5">Noise Level</div>
              </div>
              <a class="card-footer text-white clearfix small z-1" href="#">
                <span class="float-left"><span class="oi oi-volume-low"></span> Moderate {{ last_entry.db }} dB </span>
                <span class="float-right">
                  <i class="fas fa-angle-right"></i>
                </span>
              </a>
            </div>
          </div>


         
            {% else %}
            

          <div class="col-xl-6 col-sm-6 mb-6">
            <div class="card text-white bg-danger o-hidden h-100">
              <div class="card-body">
                <div class="card-body-icon">
                  <i class="fas fa-fw fa-life-ring"></i>
                </div>
                <div class="mr-5">Noise Level</div>
              </div>
              <a class="card-footer text-white clearfix small z-1" href="#">
                <span class="float-left"> <span class="oi oi-volume-high"></span> Loud {{ last_entry.db }} dB  </span>
                <span class="float-right">
                  <i class="fas fa-angle-right"></i>
                </span>
              </a>
            </div>
          </div>
            {% endif %}
        </div>

        

            <canvas class="my-4 w-100" id="myChart" ></canvas>

      </div>
      <!-- /.container-fluid -->

      <!-- Sticky Footer 
      <footer class="sticky-footer bg-dark text-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>CPSE Project - USI 2019</span>
          </div>
        </div>
      </footer>-->

    </div>
    <!-- /.content-wrapper -->

  </div>
  <!-- /#wrapper -->


        <script>let decibels = {{ decibels|tojson }}</script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='chart.js') }}"></script>
    </body>
    </html>